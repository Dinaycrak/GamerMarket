<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocumentaciÃ³n - GamerMarket</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }
        
        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        
        .content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        
        h4 {
            color: #555;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        .error-box {
            background: #fee;
            border-left: 4px solid #f44;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .solution-box {
            background: #efe;
            border-left: 4px solid #4f4;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .info-box {
            background: #eef;
            border-left: 4px solid #44f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        pre code {
            background: transparent;
            padding: 0;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .badge-error {
            background: #f44;
            color: white;
        }
        
        .badge-success {
            background: #4f4;
            color: #333;
        }
        
        .badge-info {
            background: #44f;
            color: white;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #667eea;
            color: white;
        }
        
        .flow-diagram {
            background: #f9f9f9;
            border: 2px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre;
        }
        
        .toc {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        
        .toc ul {
            list-style-type: none;
            margin-left: 0;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š DocumentaciÃ³n TÃ©cnica</h1>
            <p class="subtitle">GamerMarket E-commerce Web Application</p>
        </header>
        
        <div class="content">
            <div class="toc">
                <h2>ğŸ“‹ Tabla de Contenidos</h2>
                <ul>
                    <li><a href="#errores">1. Errores Comunes Encontrados</a></li>
                    <li><a href="#arquitectura">2. Arquitectura del Sistema</a></li>
                    <li><a href="#modulos">3. ExplicaciÃ³n de Cada MÃ³dulo</a></li>
                    <li><a href="#mejores-practicas">4. Mejores PrÃ¡cticas Aplicadas</a></li>
                    <li><a href="#flujo">5. Flujo de Datos</a></li>
                </ul>
            </div>

            <h2 id="errores">ğŸ› 1. Errores Comunes Encontrados</h2>
            
            <h3>Error #1: Register.js - Sistema de Registro</h3>
            
            <div class="error-box">
                <span class="badge badge-error">PROBLEMA</span>
                <h4>CÃ³digo Original:</h4>
                <pre><code>// No cargaba usuarios de la API
let usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];</code></pre>
                <p><strong>Problemas identificados:</strong></p>
                <ul>
                    <li>No conectaba con FakeStoreAPI para obtener usuarios existentes</li>
                    <li>No diferenciaba entre usuarios de la API y usuarios nuevos registrados</li>
                    <li>No habÃ­a estrategia de carga inicial</li>
                </ul>
            </div>
            
            <div class="solution-box">
                <span class="badge badge-success">SOLUCIÃ“N</span>
                <h4>CÃ³digo Corregido:</h4>
                <pre><code>async function cargarUsuariosDesdeAPI() {
  try {
    const response = await fetch('https://fakestoreapi.com/users');
    const usuariosAPI = await response.json();
    
    const usuariosTransformados = usuariosAPI.map(user => ({
      id: user.id,
      nombre: user.name.firstname,
      apellido: user.name.lastname,
      email: user.email,
      password: user.password,
      fuenteAPI: true
    }));
    
    localStorage.setItem('usuarios', JSON.stringify(usuariosTransformados));
  } catch (error) {
    console.error('Error al cargar usuarios:', error);
  }
}</code></pre>
                <p><strong>Â¿Por quÃ© funciona?</strong></p>
                <ul>
                    <li>âœ… Carga usuarios de FakeStoreAPI solo una vez</li>
                    <li>âœ… Guarda en localStorage para acceso rÃ¡pido</li>
                    <li>âœ… Marca los usuarios con <code>fuenteAPI: true</code></li>
                    <li>âœ… Maneja errores con try-catch</li>
                </ul>
            </div>

            <h3>Error #2: Login.js - Estructura HTML Rota</h3>
            
            <div class="error-box">
                <span class="badge badge-error">PROBLEMA</span>
                <pre><code>&lt;div class="modal-dialog" role="document&gt;
  &lt;div class="modal-content&gt;
  &lt;!-- Etiquetas sin cerrar correctamente --&gt;</code></pre>
                <p><strong>Problemas:</strong></p>
                <ul>
                    <li>Etiquetas HTML sin cerrar (falta <code>"</code>)</li>
                    <li>Modal no funcionaba correctamente</li>
                    <li>Formulario pedÃ­a datos innecesarios (nombre y apellido en login)</li>
                </ul>
            </div>
            
            <div class="solution-box">
                <span class="badge badge-success">SOLUCIÃ“N</span>
                <p><strong>Correcciones aplicadas:</strong></p>
                <ul>
                    <li>âœ… HTML corregido con etiquetas cerradas correctamente</li>
                    <li>âœ… Solo pedir email y contraseÃ±a (no nombre ni apellido)</li>
                    <li>âœ… ValidaciÃ³n de campos antes de procesar</li>
                    <li>âœ… Guardar sesiÃ³n con key consistente: <code>'usuarioActivo'</code></li>
                </ul>
            </div>

            <h3>Error #3: Products.js - Sistema Desincronizado</h3>
            
            <div class="error-box">
                <span class="badge badge-error">PROBLEMA CRÃTICO</span>
                <p><strong>Dos sistemas de carrito diferentes:</strong></p>
                <pre><code>// products.js
localStorage.setItem('gamermarketCart', ...);

// cart.js
localStorage.setItem('carrito', ...);</code></pre>
                <p>âŒ El carrito no funcionaba porque usaban keys diferentes</p>
            </div>
            
            <div class="solution-box">
                <span class="badge badge-success">SOLUCIÃ“N</span>
                <p><strong>Sistema unificado:</strong></p>
                <pre><code>// Ambos archivos ahora usan la misma key
const CART_KEY = 'gamermarketCart';

function addToCart(productId) {
  let cart = JSON.parse(localStorage.getItem(CART_KEY)) || [];
  // ... lÃ³gica del carrito
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}</code></pre>
            </div>

            <h3>Error #4: Account.js - DetecciÃ³n de SesiÃ³n Fallaba</h3>
            
            <div class="error-box">
                <span class="badge badge-error">PROBLEMA</span>
                <pre><code>// login.js guardaba con esta key:
localStorage.setItem('usuarioActivo', ...);

// account.js buscaba con otra key:
const session = localStorage.getItem('gamermarket_user_session');</code></pre>
                <p>âŒ Nunca encontraba la sesiÃ³n porque buscaba una key diferente</p>
            </div>
            
            <div class="solution-box">
                <span class="badge badge-success">SOLUCIÃ“N</span>
                <pre><code>// Ahora ambos usan 'usuarioActivo'
function verificarSesion() {
  const sessionData = localStorage.getItem('usuarioActivo');
  
  if (!sessionData) {
    mostrarModalSesion();
    return false;
  }
  
  currentUser = JSON.parse(sessionData);
  cargarDatosUsuario();
  return true;
}</code></pre>
            </div>

            <h2 id="arquitectura">ğŸ—ï¸ 2. Arquitectura del Sistema</h2>
            
            <div class="info-box">
                <h3>Estructura de Archivos</h3>
                <pre>proyecto/
â”œâ”€â”€ index.html
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ register.html
â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”œâ”€â”€ products.html
â”‚   â”‚   â”œâ”€â”€ users.html
â”‚   â”‚   â””â”€â”€ account.html
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ register.js
â”‚       â”œâ”€â”€ login.js
â”‚       â”œâ”€â”€ products.js
â”‚       â”œâ”€â”€ users.js
â”‚       â”œâ”€â”€ account.js
â”‚       â””â”€â”€ index.js</pre>
            </div>

            <h3>Flujo de Datos con localStorage</h3>
            
            <div class="flow-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FakeStoreAPI   â”‚  â† Usuarios de prueba
â”‚   (Usuarios)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ fetch()
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     register.js          â”‚
â”‚  - Carga usuarios API    â”‚
â”‚  - Permite registro      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ guardar
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     localStorage              â”‚
â”‚  Key: 'usuarios'              â”‚
â”‚  Value: [{id, nombre, email}] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚login.jsâ”‚  â”‚users.jsâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ si login exitoso
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     localStorage              â”‚
â”‚  Key: 'usuarioActivo'         â”‚
â”‚  Value: {email, nombre, ...}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚account.jsâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h2 id="modulos">âš™ï¸ 3. ExplicaciÃ³n de Cada MÃ³dulo</h2>
            
            <h3>register.js</h3>
            <table>
                <tr>
                    <th>FunciÃ³n</th>
                    <th>PropÃ³sito</th>
                </tr>
                <tr>
                    <td><code>cargarUsuariosDesdeAPI()</code></td>
                    <td>Carga inicial de usuarios desde FakeStoreAPI</td>
                </tr>
                <tr>
                    <td><code>registrarUsuario(e)</code></td>
                    <td>Maneja el formulario de registro</td>
                </tr>
                <tr>
                    <td><code>validarEmail(email)</code></td>
                    <td>Valida formato de email con regex</td>
                </tr>
                <tr>
                    <td><code>mostrarModal(titulo, mensaje)</code></td>
                    <td>Muestra modales de Bootstrap</td>
                </tr>
            </table>

            <h3>login.js</h3>
            <table>
                <tr>
                    <th>FunciÃ³n</th>
                    <th>PropÃ³sito</th>
                </tr>
                <tr>
                    <td><code>iniciarSesion(e)</code></td>
                    <td>Valida credenciales y crea sesiÃ³n</td>
                </tr>
                <tr>
                    <td><code>validarEmail(email)</code></td>
                    <td>Valida formato de email</td>
                </tr>
                <tr>
                    <td><code>mostrarModal(titulo, mensaje)</code></td>
                    <td>Feedback visual al usuario</td>
                </tr>
            </table>

            <h3>products.js</h3>
            <table>
                <tr>
                    <th>FunciÃ³n</th>
                    <th>PropÃ³sito</th>
                </tr>
                <tr>
                    <td><code>cargarProductos()</code></td>
                    <td>Carga productos desde DummyJSON API</td>
                </tr>
                <tr>
                    <td><code>asignarCategoria(titulo)</code></td>
                    <td>Clasifica productos por categorÃ­a</td>
                </tr>
                <tr>
                    <td><code>addToCart(productId)</code></td>
                    <td>AÃ±ade producto al carrito</td>
                </tr>
                <tr>
                    <td><code>updateCartCount()</code></td>
                    <td>Actualiza contador en navbar</td>
                </tr>
                <tr>
                    <td><code>renderCartModal()</code></td>
                    <td>Muestra productos en modal del carrito</td>
                </tr>
                <tr>
                    <td><code>changeQuantity(id, delta)</code></td>
                    <td>Aumenta/disminuye cantidad</td>
                </tr>
                <tr>
                    <td><code>removeFromCart(id)</code></td>
                    <td>Elimina producto del carrito</td>
                </tr>
            </table>

            <h3>account.js</h3>
            <table>
                <tr>
                    <th>FunciÃ³n</th>
                    <th>PropÃ³sito</th>
                </tr>
                <tr>
                    <td><code>verificarSesion()</code></td>
                    <td>Verifica si hay usuario logueado</td>
                </tr>
                <tr>
                    <td><code>cargarDatosUsuario()</code></td>
                    <td>Carga datos en formularios</td>
                </tr>
                <tr>
                    <td><code>cambiarSeccion(seccion)</code></td>
                    <td>Sistema de pestaÃ±as (Mi Cuenta, Direcciones, Billetera)</td>
                </tr>
                <tr>
                    <td><code>actualizarInformacion(e)</code></td>
                    <td>Guarda cambios del perfil</td>
                </tr>
                <tr>
                    <td><code>agregarDireccion(e)</code></td>
                    <td>AÃ±ade nueva direcciÃ³n</td>
                </tr>
                <tr>
                    <td><code>agregarTarjeta(e)</code></td>
                    <td>AÃ±ade mÃ©todo de pago</td>
                </tr>
            </table>

            <h2 id="mejores-practicas">âœ¨ 4. Mejores PrÃ¡cticas Aplicadas</h2>
            
            <h3>1. Manejo de Errores</h3>
            <div class="solution-box">
                <p><strong>âœ… BUENO:</strong></p>
                <pre><code>async function cargarProductos() {
  try {
    const response = await fetch('https://api.example.com/products');
    if (!response.ok) throw new Error('Error en la respuesta');
    const data = await response.json();
  } catch (error) {
    console.error('Error:', error);
    // Mostrar mensaje al usuario
  }
}</code></pre>
            </div>
            
            <div class="error-box">
                <p><strong>âŒ MALO:</strong></p>
                <pre><code>async function cargarProductos() {
  const response = await fetch('https://api.example.com/products');
  const data = await response.json();
  // Si falla, la app se rompe
}</code></pre>
            </div>

            <h3>2. ValidaciÃ³n de Datos</h3>
            <div class="solution-box">
                <p><strong>âœ… BUENO:</strong> Validar antes de procesar</p>
                <pre><code>if (!email || !password) {
  mostrarModal('Error', 'Campos obligatorios');
  return;
}

if (!validarEmail(email)) {
  mostrarModal('Error', 'Email invÃ¡lido');
  return;
}</code></pre>
            </div>

            <h3>3. localStorage Seguro</h3>
            <div class="solution-box">
                <p><strong>âœ… BUENO:</strong> Parse con try-catch</p>
                <pre><code>function obtenerCarrito() {
  try {
    const data = localStorage.getItem('gamermarketCart');
    return data ? JSON.parse(data) : [];
  } catch (error) {
    console.error('Error:', error);
    return [];
  }
}</code></pre>
            </div>

            <h3>4. CÃ³digo DRY (Don't Repeat Yourself)</h3>
            <div class="solution-box">
                <p><strong>âœ… BUENO:</strong> FunciÃ³n reutilizable</p>
                <pre><code>function mostrarModal(titulo, mensaje) {
  // CÃ³digo del modal
}

// Usar en mÃºltiples lugares
mostrarModal('Ã‰xito', 'Producto aÃ±adido');
mostrarModal('Error', 'Campos vacÃ­os');</code></pre>
            </div>

            <h2 id="flujo">ğŸ”„ 5. Flujo de Datos Completo</h2>
            
            <h3>Flujo: Registro â†’ Login â†’ Cuenta</h3>
            <div class="flow-diagram">
1. REGISTRO
   Usuario completa formulario
         â†“
   ValidaciÃ³n de datos
         â†“
   Guardar en localStorage['usuarios']
         â†“
   Mostrar confirmaciÃ³n

2. LOGIN
   Usuario ingresa credenciales
         â†“
   Buscar en localStorage['usuarios']
         â†“
   Â¿Existe y password correcto?
         â†“ SÃ­
   Guardar en localStorage['usuarioActivo']
         â†“
   Redirigir a index.html

3. ACCOUNT
   PÃ¡gina carga
         â†“
   Leer localStorage['usuarioActivo']
         â†“
   Â¿Existe sesiÃ³n?
         â†“ SÃ­
   Cargar datos del usuario
         â†“
   Mostrar formularios editables
            </div>

            <h3>Flujo: Productos â†’ Carrito</h3>
            <div class="flow-diagram">
1. CARGA DE PRODUCTOS
   PÃ¡gina carga
         â†“
   Â¿Hay productos en localStorage?
         â†“ No
   Fetch a DummyJSON API
         â†“
   Transformar y asignar categorÃ­as
         â†“
   Guardar en localStorage
         â†“
   Renderizar en el DOM

2. AÃ‘ADIR AL CARRITO
   Usuario hace clic en "AÃ±adir"
         â†“
   Buscar producto por ID
         â†“
   Leer localStorage['gamermarketCart']
         â†“
   Â¿Ya existe en el carrito?
         â†“ SÃ­: Incrementar cantidad
         â†“ No: AÃ±adir nuevo item
         â†“
   Guardar en localStorage
         â†“
   Actualizar contador
         â†“
   Mostrar modal de confirmaciÃ³n
            </div>

            <h2>ğŸ“Š Resumen Final</h2>
            
            <div class="info-box">
                <h3>âœ… Proyecto Completado con:</h3>
                <ul>
                    <li>âœ… Registro e inicio de sesiÃ³n funcional</li>
                    <li>âœ… CatÃ¡logo de productos desde API externa</li>
                    <li>âœ… Carrito de compras persistente</li>
                    <li>âœ… GestiÃ³n de cuenta de usuario</li>
                    <li>âœ… BÃºsqueda y filtros en tiempo real</li>
                    <li>âœ… DiseÃ±o responsivo con Bootstrap</li>
                </ul>
            </div>

            <div class="solution-box">
                <h3>ğŸ¯ Principales Mejoras Aplicadas:</h3>
                <ol>
                    <li>ConexiÃ³n con APIs externas (FakeStoreAPI, DummyJSON)</li>
                    <li>ValidaciÃ³n de datos en todos los formularios</li>
                    <li>Manejo robusto de errores con try-catch</li>
                    <li>CÃ³digo limpio y reutilizable (funciones DRY)</li>
                    <li>localStorage sincronizado con keys consistentes</li>
                    <li>UX mejorada con modales y feedback visual</li>
                </ol>
            </div>

            <div class="info-box">
                <h3>ğŸš€ PrÃ³ximos Pasos Recomendados:</h3>
                <ul>
                    <li>Implementar backend real (Node.js + Express)</li>
                    <li>AÃ±adir proceso de checkout completo</li>
                    <li>Integrar pasarela de pagos (Stripe, PayPal)</li>
                    <li>Agregar sistema de reviews y ratings</li>
                    <li>Implementar autenticaciÃ³n JWT</li>
                    <li>Deploy en servidor (Vercel, Netlify, Heroku)</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
